<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>List</title>
</head>
<body>
<script>
    /**
     * Данная функция является основной точкой входа в приложение.
     * Вся логика реализуется в этой функции
     */
    function main() {
        let users = ['Петров', 'Рогов', 'Игнатов', 'Ковальов'];
        alert(users);
        while (true) {
            let action = getAction();
            switch (action) {
                case 1:
                    // delete;
                    users = deleteLoop(users);
                    break;
                case 2:
                    // add
                    users = addNameLoop(users);
                    break;
                case 3:
                    // show
                    showName(users);
                    break;
                case 4:
                    // exit
                    return;
                // как корректнее return или break?;
            }
        }
    }

    //Функция действия

    function getAction() {
        let choose = 0;
        while (true) {
            choose = prompt('Выберите действие: 1 - удалить; 2 - добавить; 3 - показать все; 4 - выйти');
            choose = parseInt(choose);
            // тут проверка, если введеное число отличается от возможных вариантов ввода
            if (choose === 1 || choose === 2 || choose === 3 || choose === 4) {
                break;
            }
            alert('Введите 1 - удалить, 2 - добавить, 3 - показать все или 4 - для выхода');
        }
        return choose;
    }


    //Функция добавления имен

    function addName(arr, value) {
        let index = find(arr, value);
        if (index === -1) {
            arr.push(value);
            alert(value + ' успешно добавлен');
        } else {
            alert('Такое имя уже существует');
        }
        return arr;
    }

    //Функция цикл для повторного добавления имен
    function addNameLoop(arr) {
        while (true) {
            let name = prompt('Введите имя для добавления или отмена для выхода');
            //если вместо name === null  - !name  не работает выход из функции
            if (name === null) {
                break;
            }
            if (name === '') {
                alert('Ошибка: Пустое имя нельзя добавить');
                continue;
            }

            arr = addName(arr, name);
        }
        return arr;
    }

    //Поиск индекса

    function find(arr, value) {
        for (let i = 0; i < arr.length; i++) {
            if (arr[i] === value) {
                return i
            }
        }
        return -1;
    }

    // Функция удаления имен

    function deleteName(arr, name) {
        let index = find(arr, name);
        if (index !== -1) {
            arr.splice(index, 1);
            alert(name + ' успешно удален');
        } else {
            alert('Такого имени нет');
        }
        return arr;
    }

    // Цикл для повторных удалений имен

    function deleteLoop(arr) {
        while (true) {
            let question = prompt('Введите имя для удаления или отмена для выхода');
            //если !question - не работает выход из цикла
            if (question === null) {
                break;
            }
            if (question === '') {
                alert('Введите имя');
                continue;
            }

            arr = deleteName(arr, question);
        }

        return arr;
    }

    // Обновляемый список удаленных и добавленных имен

    function showName(arr) {
        alert('Список всех имен: ' + arr);
    }

    main();
</script>
</body>
</html>
