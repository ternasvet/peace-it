<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>table</title>
</head>
<body>
<script>
    let arr = [{
        name: 'Don',
        surname: 'Smith',
        age: 25,
        country: 'Ukraine',
        male: 'man'
    }, {
        name: 'Mikle',
        surname: 'Miller',
        age: '',
        country: 'Germany'
    }, {
        name: 'Michael',
        surname: 'Kors',
        age: 60,
        country: 'USA',
        male: ''
    }, {
        name: 'Denis',
        surname: '',
        age: 32,
        country: '',
        male: 'man'
    }, {
        name: 'Shani',
        surname: 'Mizrachi',
        age: 34,
        country: 'Israel',
        male: 'women'
    }
    ];

    function table(arr) {
        let table = document.createElement('table');
        table.classList.add('table-dark', 'table-bordered', 'table');
        let tr2 = document.createElement('tr');

        let columnNames = getColums(arr);
        if (Array.isArray(columnNames)) {
            columnNames.forEach((item) => {
                let th = document.createElement('th');
                th.innerText = item;
                tr2.append(th);
            });
            table.prepend(tr2);
        }
        if (Array.isArray(arr)) {
            arr.forEach((item) => {
                    let tr = document.createElement('tr');

                    columnNames.forEach((key) => {
                        let td = document.createElement('td');
                        if (item[key] !== undefined) {
                            td.innerText = item[key];
                        }
                        tr.append(td);
                    });
                    table.append(tr);
                }
            );
        }
        document.body.append(table);
    }

    function getColums(arr) {
        let newArr = [];
        arr.forEach((item) => {
            if (typeof item === 'object') {
                for (let key in item) {
                    if (!newArr.includes(key)) {
                        newArr.push(key);
                    }
                }
            }
        });
        return newArr;
    }

    (table(arr));
</script>
</body>
</html>
